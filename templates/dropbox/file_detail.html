{% extends "base.html" %}

{% block content %}

<h2>File detail</h2>

<!-- Display messages -->
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">
        {{ message }}
    </div>
    {% endfor %}

<!-- upload csv file -->
<div class="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl m-3">
    <div class="md:flex">
        <div class="p-8">
            <div class="run-python-code">
                <!-- Display file upload form -->
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    {{ form }}
                    {{ excel_form }}
                    <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" type="submit">Save</button>
                </form>
            </div>
            <!-- If file is provided, display run script button and download link -->
            {% if file %}
            <div class="file-detail mt-6">
                <form method="post" action="{% url 'dropbox:run_script' file.id %}">
                    {% csrf_token %}
                    <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" type="submit">Run Python Script</button>
                    <a href="{% url 'dropbox:download' file.id %}" class="text-blue-500">Download - {{ file.name }}</a>
                </form>
            </div>
            {% endif %}
        </div>
    </div>
</div>







{% endblock content %}

